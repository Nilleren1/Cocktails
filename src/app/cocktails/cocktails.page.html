<ion-content [fullscreen]="true">

  <ion-header>
    <ion-toolbar>
      <ion-title>Popular Cocktails</ion-title>
    </ion-toolbar>
  </ion-header>

  <div *ngIf="!searchPerformed">
    <swiper-container 
    [modules]="swiperModules"
    [slidesPerView]="1.2"
    [initialSlide]="1"
    [centeredSlides]="true"
    [autoplay]="true"
    [spaceBetween]="20"
    [pagination]="{clickable: true, dynamicbullets: true}">
      <swiper-slide *ngFor="let cocktail of popularCocktails">
        <img [src]="cocktail.image" alt="{{ cocktail.name }}" />
      </swiper-slide>
  </swiper-container>
  </div>

  <ion-searchbar [(ngModel)]="searchTerm" (ionChange)="searchCocktail()" (ionClear)="clearSearch()"></ion-searchbar>
  
  <ng-container *ngIf="searchPerformed && (!cocktailData?.drinks || cocktailData.drinks.length === 0); else showResults">
    <div class="ion-text-center">
      <h4>No search results found</h4>
    </div>
  </ng-container>

  <ng-template #showResults>
    <ion-card *ngFor="let cocktail of cocktailData?.drinks">
      <img [src]="cocktail.strDrinkThumb" />
      <ion-card-header>
        <ion-card-title>{{ cocktail.strDrink }}</ion-card-title>
        <ion-card-subtitle>{{ cocktail.strCategory }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ng-container *ngFor="let ingredient of getIngredients(cocktail); let i = index">
          <p>
            <span style="font-weight: bold;">{{ ingredient }}</span>
            {{ getMeasurements(cocktail)[i] }}
          </p>
        </ng-container>
      </ion-card-content>
    </ion-card>
  </ng-template>
</ion-content>
